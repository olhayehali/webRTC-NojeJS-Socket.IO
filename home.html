<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="Description" content="Enter your description here"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<link rel="stylesheet" href="static/css/style3.css">
<link rel="stylesheet" href="static/css/webrtc.css">
<script src="/socket.io/socket.io.js"></script>
<title>home_webrtc/chat</title>
</head>
<body>
<!-- chat message ui in html with bootstrap -->

<!-- Modal -->
<div class="modal fade" id="modelId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
                <div class="modal-header">
                        <h5 class="modal-title">calling</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                </div>
            <div class="modal-body">
                <div class="container">
                    <div class="view " >
                        <!-- remote view -->
                        <div class="remotecontainer ">
                            <video class="remote" id="remote" autoplay playsinline >        
                            </video>
                        </div>    
                        <!-- local view -->
                        <div class="localcontainer">
                            <video class="local" id="local" autoplay playsinline >
                            </video>
                        </div>
                    </div>
                    </div>
                </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="mute" data-dismiss="modal">mute</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="closecall" >close</button>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-12 h-100">
            <div class="card overflow-auto">
                <div class="card-header">
                    <h4 class="card-title">Chat</h4>
                <!-- input form  group -->
                <div class="d-flex flex-row">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">
                                <i class="fa fa-user"></i>
                            </span>
                            <input type="text" class="form-control" value="olhayeh" id="userName">
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">
                                <i class="fa fa-phone"></i>
                            </span>
                            <input type="text" class="form-control" value="ali" id="userCall">
                        </div>
                    </div>
                <!-- Button trigger modal -->
                    <button type="button" class="btn btn-primary btn-lg" onclick="makeCall()" data-toggle="modal" data-target="#modelId">
                        call
                    </button>  
                    <button type="button" class="btn btn-primary btn-lg d-none"  data-toggle="modal" data-target="#modelId" id="receiveCall">
                        call
                    </button>  
                </div>
                <div class="card-body ">
                    <div class="messages d-flex flex-column  " id="messages">
                        <!-- message item with custom color -->
                    </div>
            </div>
            <!-- card footer -->
            <div class="card-footer">
                <div class="input-group">
                    <input type="text" class="form-control"  id="messageSend">
                    <div class="input-group-append">
                        <button class="btn" type="button" id="sendBtn" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
        </div>
    </div>
</div>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.min.js"></script>
<script src="static/js/script3.js"></script>
<script defer src="static/js/simplePeer.js"></script>
<script defer src="static/js/webrtc.js"></script>
<script>
    $('#exampleModal').on('show.bs.modal', event => {
        var button = $(event.relatedTarget);
        var modal = $(this);
        // Use above variables to manipulate the DOM
        
    });
</script>

</body>
</html>